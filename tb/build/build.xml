<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="tb" default="dist" basedir="..">

  <description>
   Taetigkeitsberichte main build script
  </description>
   <property environment="env"/>
   
   <property name="env.server.name" value="localhost:8080"/>
   <!-- set directories used in this build -->
   
   <property name="sources" location="sources"/>
   <property name="web_sources" location="web"/>
   <property name="tb-lib" location="lib"/>
   <property name="doc" location="doc"/>
   <property name="log" location="log"/>
   <property name="javadoc" location="${doc}/javadoc"/>
   <property name="temp" location="temp"/>
   <property name="tomcat.home" location="${env.CATALINA_HOME}"/>
   <property name="tomcat.lib" location="${tomcat.home}/common/lib"/>

   <target name="start-tomcat">
    	<echo>Starting tomcat ... </echo>
    	<exec dir="${tomcat.home}/bin" executable="startup" vmlauncher="false" spawn="true">
    		<env key="CATALINA_HOME" value= "${tomcat.home}"/>
    		<env key="CATALINA_OPTS" value= "-Xms128m -Xmx512m"/>
    	</exec> 
   </target>
   
    
   <target name="dist">
    	<mkdir dir="temp" />
    	<war webxml="src/web/WEB-INF/web.xml" destfile="temp/tb.war">
      		<fileset dir="src/web"/>
    	</war>
    	<copy todir="${tomcat.home}/webapps">
    		<fileset file="temp/tb.war"/>
    	</copy> 
    	<echo message="deleting ${tomcat.home}/webapps/tb..."/>
        <delete dir="${tomcat.home}/webapps/tb"/>
  </target>
</project>