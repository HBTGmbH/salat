<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
  <!-- Generic master table fragment usable across modules -->
  <div class="d-none">
    <!--
      Usage example:
      <div th:replace="~{fragments/_master-table :: masterTable(
          title=${'My Title'},
          backHref=@{/Back}, backLabel=${'Back'},
          addHref=@{/Add}, addLabel=${'Add New'},
          thead=~{::theadContent}, tbody=~{::tbodyContent}
      )}">
        <thead th:fragment="theadContent">...</thead>
        <tbody th:fragment="tbodyContent">...</tbody>
      </div>
    -->
    <section th:fragment="masterTable(title, backHref, backLabel, addHref, addLabel, thead, tbody)">
      <div class="d-flex align-items-center mb-3">
        <h1 class="me-auto" th:text="${title}">Title</h1>
        <a th:if="${backHref}" class="btn btn-primary" th:href="${backHref}"><i class="bi bi-arrow-left"></i> <span th:text="${backLabel}">Back</span></a>
      </div>

      <div class="table-responsive card">
        <table class="table table-vcenter card-table">
          <thead th:replace="${thead}"></thead>
          <tbody th:replace="${tbody}"></tbody>
        </table>
      </div>

      <div class="mt-3" th:if="${addHref}">
        <a class="btn btn-success" th:href="${addHref}"><i class="bi bi-plus-lg"></i> <span th:text="${addLabel}">Add</span></a>
      </div>
    </section>

    <th th:fragment="colHeader(label)"><span th:text="${label}">Header</span></th>
    <th th:fragment="colHeaderNarrow()" class="w-1"></th>

    <td th:fragment="colText(text)" th:text="${text}">Text</td>

    <td th:fragment="colTextAdd(text, additional)">
      <div th:text="${text}">text</div>
      <small class="text-muted" th:text="${additional}">description</small>
    </td>

    <td th:fragment="colYesNo(enabled)">
      <span th:if="${enabled}" class="text-success"><i class="bi bi-check-circle"></i> Yes</span>
      <span th:if="${!enabled}" class="text-danger"><i class="bi bi-x-circle"></i> No</span>
    </td>

    <td th:fragment="colCron(cronExpr, defCron, desc)">
      <div th:text="${#strings.isEmpty(cronExpr) ? defCron : cronExpr}">cron</div>
      <small class="text-muted" th:text="${desc}">description</small>
    </td>

    <td th:fragment="colDate(date)" th:text="${#temporals.format(date, 'yyyy-MM-dd HH:mm')}">2025-01-01 00:00</td>

    <td th:fragment="colEditLink(href)">
      <a class="btn btn-sm btn-outline-secondary" th:href="${href}"><i class="bi bi-pencil"></i></a>
    </td>

    <td th:fragment="colDeleteForm(id, action)">
      <form th:action="${action}" method="post" th:onsubmit="|return confirm('Are you sure?');|">
        <input type="hidden" name="id" th:value="${id}"/>
        <button type="submit" class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
      </form>
    </td>

  </div>
</body>
</html>
