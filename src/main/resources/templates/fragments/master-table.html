<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
  <!-- Generic master table fragment usable across modules -->
  <div class="d-none">
    <!--
      Usage example:
      <div th:replace="~{fragments/_master-table :: masterTable(
          addHref=@{/Add}, addLabel=${'Add New'},
          thead=~{::theadContent}, tbody=~{::tbodyContent}
      )}">
        <thead th:fragment="theadContent">...</thead>
        <tbody th:fragment="tbodyContent">...</tbody>
      </div>
    -->
    <section th:fragment="masterTable(addHref, addLabel, addIf, addIcon, thead, tbody)">
      <div class="card mb-3" th:if="${addHref != '' && addIf}">
        <div class="card-body">
          <div class="row g-2">
            <div class="col-md-6"></div>
            <div class="col-auto"></div>
            <div class="col-auto ms-auto">
              <a class="btn btn-success" th:href="${addHref}"><i class="icon ti" th:classappend="${addIcon}"></i> [[${addLabel}]]</a>
            </div>
          </div>
        </div>
      </div>
      <div class="table-responsive card">
        <table class="table table-vcenter card-table">
          <thead th:replace="${thead}"></thead>
          <tbody th:replace="${tbody}"></tbody>
        </table>
      </div>
    </section>

    <section th:fragment="masterTableFilter(addHref, addLabel, addIf, addIcon, filterHref, filterValue, thead, tbody)">
      <div class="card mb-3">
        <div class="card-body">
          <form class="row g-2" method="get" th:action="${filterHref}">
            <div class="col-md-6">
              <input type="text" class="form-control" name="filter" placeholder="Filter"
                     th:value="${filterValue}" />
            </div>
            <div class="col-auto">
              <button class="btn btn-primary" type="submit"><i class="icon ti ti-filter m-0"></i></button>
            </div>
            <div class="col-auto ms-auto" th:if="${addHref != '' && addIf}">
              <a class="btn btn-success" th:href="${addHref}"><i class="icon ti" th:classappend="${addIcon}"></i> [[${addLabel}]]</a>
            </div>
          </form>
        </div>
      </div>
      <div class="table-responsive card">
        <table class="table table-vcenter card-table">
          <thead th:replace="${thead}"></thead>
          <tbody th:replace="${tbody}"></tbody>
        </table>
      </div>
    </section>

    <th th:fragment="colHeaderPrimary(label)"><span th:text="${label}">Header</span></th>
    <th th:fragment="colHeader(label)" class="d-none d-sm-table-cell"><span th:text="${label}">Header</span></th>

    <th th:fragment="colHeaderActionIcon()" class="w-1"></th>

    <td th:fragment="colTextPrimary(text)" th:text="${text}">Text</td>

    <td th:fragment="colText(text)" th:text="${text}" class="d-none d-sm-table-cell">Text</td>

    <td th:fragment="colTextAdd(text, additional)" class="d-none d-sm-table-cell">
      <div th:text="${text}">text</div>
      <small class="text-muted" th:text="${additional}">description</small>
    </td>

    <td th:fragment="colYesNo(enabled)" class="d-none d-sm-table-cell">
      <span th:if="${enabled}" class="text-success"><i class="icon ti ti-circle-check"></i> Yes</span>
      <span th:if="${!enabled}" class="text-danger"><i class="icon ti ti-circle-x"></i> No</span>
    </td>

    <td th:fragment="colCron(cronExpr, defCron, desc)" class="d-none d-sm-table-cell">
      <div th:text="${#strings.isEmpty(cronExpr) ? defCron : cronExpr}">cron</div>
      <small class="text-muted" th:text="${desc}">description</small>
    </td>

    <td th:fragment="colDate(date)" th:text="${#temporals.format(date, 'yyyy-MM-dd HH:mm')}" class="d-none d-sm-table-cell">2025-01-01 00:00</td>

    <td th:fragment="colEditLink(href)">
      <a class="btn btn-outline-primary" th:href="${href}"><i class="icon ti ti-pencil m-0"></i></a>
    </td>

    <td th:fragment="colEditLinkIf(href, ifCondition)">
      <a th:if="${ifCondition}" class="btn btn-outline-primary" th:href="${href}"><i class="icon ti ti-pencil m-0"></i></a>
    </td>

    <td th:fragment="colDeleteForm(id, action)">
      <form th:action="${action}" method="post" th:onsubmit="|return confirm('Are you sure?');|">
        <input type="hidden" name="id" th:value="${id}"/>
        <button type="submit" class="btn btn-outline-danger"><i class="icon ti ti-trash m-0"></i></button>
      </form>
    </td>

    <td th:fragment="colDeleteFormIf(id, action, ifCondition)">
      <form th:if="${ifCondition}" th:action="${action}" method="post" th:onsubmit="|return confirm('Are you sure?');|">
        <input type="hidden" name="id" th:value="${id}"/>
        <button type="submit" class="btn btn-outline-danger"><i class="icon ti ti-trash m-0"></i></button>
      </form>
    </td>

  </div>
</body>
</html>
